<?xml version="1.0" encoding="UTF-8" ?>
{{CUT({{GET(noItems)}})}}{{
{{SET(noItems:true)}}
{{XML()}}{{
<document>
  <head>
    <style>
    .whiteButton {
      tv-tint-color: rgb(255, 255, 255);
      width: 500;
      height: 200;
    }
    .plot {
      min-height: 300;
      max-height: 400;
      margin: 50;
    }
    </style>
  </head>
   <productBundleTemplate>
      <background>
      </background>
      <banner>
         <stack>
           <title><![CDATA[{{VAL(MediaContainer/title1)}}]]></title>
           <subtitle><![CDATA[{{VAL(MediaContainer/title2)}}]]></subtitle>
            <row>
            </row>
            <row>
              <text><![CDATA[{{VAL(MediaContainer/size)}} episodes]]></text>
            </row>
            <description style="tv-text-max-lines: 3" allowsZooming="true" moreLabel="MORE"
                onSelect="Presenter.loadContext('TVShow_Description', '{{PMSID()}}', '{{PATH()}}')">
              <![CDATA[{{VAL(MediaContainer/summary)}}]]>
            </description>
            <row>
              <buttonLockup onSelect="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL()}})}}', '')">
                <badge src="{{RESOURCEURL(TVMLTemplates/Revenant/images/buttons:PlayAll:png)}}" width="50" height="50"/>
                <title>Play all</title>
              </buttonLockup>
              <buttonLockup onSelect="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL()}})}}', 'shuffle')">
                <badge src="{{RESOURCEURL(TVMLTemplates/Revenant/images/buttons:Shuffle:png)}}" width="50" height="50"/>
                <title>Shuffle all</title>
              </buttonLockup>
            </row>

         </stack>
             <heroImg src="{{IMAGEURL(MediaContainer/thumb::)}}" />
      </banner>
      <shelf style="margin: 0 0 90 0;">
         <header>
            <title>Episodes</title>
         </header>
         <section>
           {{COPY(MediaContainer/Video)}}{{
         	{{SET(noItems:false)}}
          <lockup
              onSelect="Presenter.loadAndSwap('TVShow_PrePlay', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
              onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
              onHoldSelect="Presenter.loadContext('TVShow_MorePopUp', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
              >
            <img src="{{IMAGEURL(thumb::360)}}" width="300" height="201" />
            {{IF({{CHK("{{VAL(viewOffset:)}}">"0")}})}}{{
            <overlay>
                 <progressBar value="{{EVAL({{VAL(viewOffset)}}.0/{{VAL(duration)}}.0)}}"/>
             </overlay>
             }}
             {{IF({{CHK("{{VAL(viewCount:)}}">="1")}})}}{{
               <overlay>
               </overlay>
               }}

                <title>{{VAL(index:)}}. {{VAL(title)}}</title>
                <relatedContent>
                  <infoTable>
                    <header>
                      <title><![CDATA[{{VAL(title)}}]]></title>
                    </header>
                    <info>
                      <header>
                        <title>{{EP_INDEX({{GET(season:)}}:{{VAL(index:)}})}}</title>
                      </header>
                      <description allowsZooming="true" moreLabel="more"
                  onSelect="Presenter.loadContext('TVShow_PrePlayDescription', '{{PMSID()}}', '{{PATH()}}')"><![CDATA[{{VAL(summary)}}]]>
              				</description>
                    </info>
                  </infoTable>
                </relatedContent>
          </lockup>
           }}
         </section>
      </shelf>

    </productBundleTemplate>
  </document>
}}
}}

{{IF({{GET(noItems)}})}}{{  <!--enable if no items added-->
<document>
  <alertTemplate>
    <title>PlexConnect</title>
    <description>{{TEXT(Plex Media Server: No Items Available)}}</description>
  </alertTemplate>
</document>
}}
