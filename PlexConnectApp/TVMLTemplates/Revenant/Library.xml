<?xml version="1.0" encoding="UTF-8" ?>
{{CUT({{GET(noItems)}})}}{{
{{SET(noItems:true)}}
{{XML()}}{{
<document>
  <head>
    <style>
        .darkBackgroundColor {
        background-color: #4c4c4c;
        }
        .lightBackgroundColor {
        background-color: #b2b2b2;
        }
        .showTextOnHighlight {
        tv-text-highlight-style: show-on-highlight;
        }
        .shelfLabels {
        tv-text-highlight-style: show-on-highlight;
        }
        .whiteButton {
        tv-tint-color: rgb(255, 255, 255);
        font-size: 20;
        margin: 40;
        tv-text-style: callout;
        }
        .rowLayout {
        height: 100;
        margin: 60;
        tv-align: right;
        }
        .roundedImageCorners {
        itml-img-treatment: corner-small;
        }
        .roundedOverlay {
        itml-img-treatment: corner-small;
        margin: 0 -30 -280 -30;
        }
        .banner {
        margin: 0 0 30 0;
        }
        .shelfItems {
        tv-interitem-spacing: 60;
        }
        .sectionLabel {
        text-align: center;
      <!--margin: 0 0 15 0;-->
      <!--color: #605e58;-->
        }
        .title {
        color: #ffffff;
        }
    </style>
  </head>
  <stackTemplate>
    <identityBanner class="banner">
      <title style="text-align: left; color: #ff8000">PlexConnect</title>
      <subtitle style="text-align: left;">Revenant Theme by CyberGhost84</subtitle>
    <row>
        {{IF({{CHK("{{PMSCNT()}}">"1")}})}}{{
        <buttonLockup onSelect="Presenter.load('MyPlex_Servers', '', '')">
            <badge src="{{RESOURCEURL(TVMLTemplates/Revenant/images/buttons:Server:png)}}" width="50" height="50"/>
            <title>{{TEXT(Server)}}</title>
        </buttonLockup>
        }}

        <buttonLockup onSelect="Presenter.load('Search_All', '', '')">
            <badge src="{{RESOURCEURL(TVMLTemplates/Revenant/images/buttons:Search:png)}}" width="50" height="50"/>
            <title>Search</title>
        </buttonLockup>
        <buttonLockup onSelect="Presenter.load('Settings', '', '')">
            <badge src="{{RESOURCEURL(TVMLTemplates/Revenant/images/buttons:Settings:png)}}" width="50" height="50"/>
            <title>Settings</title>
        </buttonLockup>
    </row>
    </identityBanner>
    <collectionList>
    <shelf centered="true" autoHighlight="true">
      <header>
      	<title>{{PMSVAL(name)}}</title>
      </header>
      <section>
        {{COPY(MediaContainer/Directory)}}
        {{
        {{SET(noItems:false)}}
        {{IF({{CHK("{{VAL(type:)}}"=="movie")}})}}
        {{
        {{IF({{CHK("{{VAL(scanner:)}}"=="Plex Video Files Scanner")}})}}
        {{
        <lockup
          onSelect="Presenter.load('List', '{{PMSID()}}', '{{PATH(/library/sections/{{VAL(key)}}/folder)}}')"
          onSelectHold="modal">
{{XML({{PATH(/library/sections/{{VAL(key)}}/recentlyAdded)}})}}{{
            <img class="roundedImageCorners" src="{{IMAGEURL(MediaContainer/Video/art::600)}}" width="548" height="280" />
}}
        <overlay>
						<img class="roundedOverlay" src="{{RESOURCEURL(TVMLTemplates/Revenant/images:overlay:png)}}" width="548" height="280" />
          	<title class="sectionLabel"><![CDATA[{{VAL(title)}}]]></title>

        </overlay>
        </lockup>
        }}
        {{IF(!{{CHK("{{VAL(scanner:)}}"=="Plex Video Files Scanner")}})}}
        {{
        <lockup
          onSelect="Presenter.load('Movie_MenuBar', '{{PMSID()}}', '{{PATH(/library/sections/{{VAL(key)}})}}')"
          onSelectHold="modal">
{{XML({{PATH(/library/sections/{{VAL(key)}}/recentlyAdded)}})}}{{
            <img class="roundedImageCorners" src="{{IMAGEURL(MediaContainer/Video/art::600)}}" width="548" height="280" />
}}
        <overlay>
						<img class="roundedOverlay" src="{{RESOURCEURL(TVMLTemplates/Revenant/images:overlay:png)}}" width="548" height="280" />
						<title class="sectionLabel"><![CDATA[{{VAL(title)}}]]></title>

        </overlay>
        </lockup>
        }}
        }}
        {{IF({{CHK("{{VAL(type:)}}"=="show")}})}}
        {{
        <lockup
          onSelect="Presenter.load('TVShow_MenuBar', '{{PMSID()}}', '{{PATH(/library/sections/{{VAL(key)}})}}')"
          onSelectHold="modal">
{{XML({{PATH(/library/sections/{{VAL(key)}}/recentlyAdded)}})}}{{
					<img class="roundedImageCorners" src="{{IMAGEURL(MediaContainer/Video/art::600)}}" width="548" height="280" />
}}
        <overlay>
						<img class="roundedOverlay" src="{{RESOURCEURL(TVMLTemplates/Revenant/images:overlay:png)}}" width="548" height="280" />
						<title class="sectionLabel"><![CDATA[{{VAL(title)}}]]></title>

        </overlay>
        </lockup>
        }}
        {{IF({{CHK("{{VAL(type:)}}"=="artist")}})}}
        {{
        <lockup
          onSelect="Presenter.load('Music_MenuBar', '{{PMSID()}}', '{{PATH(/library/sections/{{VAL(key)}})}}')"
          onSelectHold="modal">
{{XML({{PATH(/library/sections/{{VAL(key)}}/recentlyAdded)}})}}{{
            <img class="roundedImageCorners" src="{{IMAGEURL(MediaContainer/Directory/art::600)}}" width="548" height="280" />
}}
        <overlay>
						<img class="roundedOverlay" src="{{RESOURCEURL(TVMLTemplates/Revenant/images:overlay:png)}}" width="548" height="280" />
						<title class="sectionLabel"><![CDATA[{{VAL(title)}}]]></title>

          </overlay>
        </lockup>
        }}
        {{IF({{CHK("{{VAL(type:)}}"=="photo")}})}}
        {{
        <lockup
          onSelect="Presenter.load('Photo_MenuBar', '{{PMSID()}}', '{{PATH(/library/sections/{{VAL(key)}})}}')"
          onSelectHold="modal">
{{XML({{PATH(/library/sections/{{VAL(key)}}/recentlyAdded)}})}}{{
            <img class="roundedImageCorners" src="{{IMAGEURL(MediaContainer/Photo/thumb::600)}}" width="548" height="280" />
}}
        <overlay>
						<img class="roundedOverlay" src="{{RESOURCEURL(TVMLTemplates/Revenant/images:overlay:png)}}" width="548" height="280" />
						<title class="sectionLabel"><![CDATA[{{VAL(title)}}]]></title>

          </overlay>
        </lockup>
        }}
        }}
      </section>
    </shelf>
{{XML({{PATH(/library/onDeck)}})}}{{
    {{IFNODE(MediaContainer/Video)}}{{
    <shelf id="onDeck">
      <header>
          <title>On Deck</title>
      </header>
      <section>
        {{COPY(MediaContainer/Video)}}
        {{
        {{SET(noItems:false)}}
        {{IF({{CHK("{{VAL(type:)}}"=="episode")}})}}{{
        <lockup
          onSelect="Presenter.load('TVShow_PrePlay', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onSelectHold="modal">
          <img src="{{IMAGEURL(grandparentThumb::360)}}" height="310" width="207" />
          <overlay>
         		<progressBar value="{{EVAL({{VAL(viewOffset)}}.0/{{VAL(duration)}}.0)}}"/>
          </overlay>
          <title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle class="showTextOnHighlight">{{TEXT(S)}}{{VAL(parentIndex)}} â€¢ {{TEXT(E)}}{{VAL(index)}}</subtitle>
        </lockup>
        }}
        {{IF({{CHK("{{VAL(type:)}}"=="movie")}})}}{{
        <lockup
          onSelect="Presenter.load('Movie_PrePlay', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}', 'resume')"
          onSelectHold="modal">
          <img src="{{IMAGEURL(thumb::360)}}" height="310" width="207" />
          <overlay>
         		<progressBar style="color: #ff8000" value="{{EVAL({{VAL(viewOffset)}}.0/{{VAL(duration)}}.0)}}"/>
          </overlay>
 					<title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle class="showTextOnHighlight">{{VAL(year)}}</subtitle>
        </lockup>
        }}
        }}
      </section>
    </shelf>
    }}
}}

{{XML({{PATH(/library/recentlyAdded)}})}}{{
	<shelf>
		<section>
    {{IFNODE(MediaContainer/Video)}}{{
      <header>
          <title>Recently Added Movies</title>
      </header>
        {{COPY(MediaContainer/Video)}}{{
        {{SET(noItems:false)}}
        <lockup
          onSelect="Presenter.load('Movie_PrePlay', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onSelectHold="modal">
          <img src="{{IMAGEURL(thumb::360)}}" height="310" width="207" />
          {{IF({{CHK(!"{{VAL(viewCount:)}}">="1")}})}}{{
          <overlay>
            <img style="tv-position: top-right; margin: -30 -24 120 120" src="{{RESOURCEURL(TVMLTemplates/Revenant/images:overlayUnwatched:png)}}"  width="33" height="33" />
          </overlay>
          }}
          <title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle class="showTextOnHighlight">{{VAL(year)}}</subtitle>
        </lockup>
        }}
    }}
  	</section>
	</shelf>
}}

{{XML({{PATH(/library/recentlyAdded)}})}}{{
	<shelf>
		<section>
    {{IFNODE(MediaContainer/Directory)}}{{
    {{COPY(MediaContainer/Directory)}}{{
        {{IF({{CHK("{{VAL(type:)}}"=="season")}})}}{{
        {{SET(noItems:false)}}
        <lockup
          onSelect="Presenter.load('TVShow_EpisodeList', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onSelectHold="modal">
          <img src="{{IMAGEURL(parentThumb::360)}}" height="310" width="207" />
          <title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle class="showTextOnHighlight"><![CDATA[{{VAL(parentTitle)}}]]></subtitle>
        </lockup>
        <header>
          <title>Recently Added Television</title>
      	</header>
        }}
        {{IF({{CHK("{{VAL(type:)}}"!="season")}})}}{{
        <data/>
        }}
    }}
    }}
    </section>
    </shelf>
    }}


    {{XML({{PATH(/hubs)}})}}{{
    	{{IFNODE(MediaContainer/Hub)}}{{
    	{{COPY(MediaContainer/Hub)}}{{
    		{{IF({{CHK("{{VAL(hubIdentifier:)}}"=="home.photos.recent")}})}}{{
    		<shelf>
    		<section>
    			{{COPY(Photo)}}{{
    			<lockup
    				onSelect="photoPresenter.show('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onPlay="photoPresenter.slideshow('{{PMSID()}}', '{{PATH()}}')"
    				onSelectHold="modal">
    				<img class="roundedImageCorners" src="{{IMAGEURL(thumb::360)}}" height="250" width="250" />
    				<title><![CDATA[{{VAL(originallyAvailableAt)}}]]></title>
    			</lockup>
    			}}
    		</section>
    		<header>
    				<title>Recently Added Photos</title>
    		</header>
    		</shelf>
    		}}
      }}
      }}
    }}

    {{XML({{PATH(/hubs)}})}}{{
    	{{IFNODE(MediaContainer/Hub)}}{{
    	{{COPY(MediaContainer/Hub)}}{{
    		{{IF({{CHK("{{VAL(hubIdentifier:)}}"=="home.music.recent")}})}}{{
    		<shelf>
    		<section>
    			{{COPY(Directory)}}{{
    			<lockup
    				onSelect="Presenter.load('Music_Album', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onPlay="audioPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}', 'shuffle')"
    				onSelectHold="modal">
    				<img src="{{IMAGEURL(thumb::360)}}" height="250" width="250" />
    				<title><![CDATA[{{VAL(title)}}]]></title>
    				<subtitle class="showTextOnHighlight"><![CDATA[{{VAL(parentTitle)}}]]></subtitle>
    			</lockup>
    			}}
    		</section>
    		<header>
    				<title>Recntly Added Music</title>
    		</header>
    		</shelf>
    		}}
    	}}
    	}}
    }}

    {{XML({{PATH(/channels/all)}})}}{{
    {{IFNODE(MediaContainer/Directory)}}{{
    	<shelf>
        <header>
            <title>Channels</title>
        </header>
    		<section>
            {{COPY(MediaContainer/Directory)}}{{
        {{SET(noItems:false)}}
        {{IF({{TABLE(${{VAL(key)}}:0:/video/:1)}})}}{{
        <lockup
          onSelect="Presenter.load('Channel_Video', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onSelectHold="modal">
          <img src="{{IMAGEURL(thumb::360)}}" height="250" width="250" />
          <title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle class="showTextOnHighlight">Video</subtitle>
        </lockup>
        }}
        {{IF({{TABLE(${{VAL(key)}}:0:/music/:1)}})}}{{
        <lockup
          onSelect="Presenter.load('Channel_Music', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onSelectHold="modal">
          <img src="{{IMAGEURL(thumb::360)}}" height="250" width="250" />
          <title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle class="showTextOnHighlight">Music</subtitle>
        </lockup>
        }}
        {{IF({{TABLE(${{VAL(key)}}:0:/photos/:1)}})}}{{
        <lockup
          onSelect="Presenter.load('Photo_Browser', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onSelectHold="modal">
          <img src="{{IMAGEURL(thumb::360)}}" height="250" width="250" />
          <title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle class="showTextOnHighlight">Photos</subtitle>
        </lockup>
        }}
        }}
      </section>
    </shelf>
    }}
  }}

    {{XML({{PATH(/playlists?sort=lastViewedAt)}})}}{{
    	 {{IFNODE(MediaContainer/Playlist)}}{{
    	 <shelf id="Playlists">
    		<header>
    				<title>Playlists</title>
    		</header>
    		<section>
    			{{COPY(MediaContainer/Playlist)}}{{
    			{{SET(noItems:false)}}
    			{{IF({{CHK("{{VAL(playlistType:)}}"=="video")}})}}{{
    			<lockup
    				onSelect="Presenter.load('Playlists_Video', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}', 'shuffle')"
    				onSelectHold="modal">
    				<img src="{{IMAGEURL(composite::360)}}" height="250" width="250" />
    				<title><![CDATA[{{VAL(title)}}]]></title>
    				<subtitle class="showTextOnHighlight">{{DURATION_HM({{VAL(duration)}})}}</subtitle>
    			</lockup>
    			}}
    			{{IF({{CHK("{{VAL(playlistType:)}}"=="audio")}})}}{{
    			<lockup
    				onSelect="Presenter.load('Playlists_Audio', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onPlay="audioPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}', 'shuffle')"
    				onSelectHold="modal">
    				<img src="{{IMAGEURL(composite::360)}}" height="250" width="250" />
    				<title><![CDATA[{{VAL(title)}}]]></title>
    				<subtitle class="showTextOnHighlight">{{DURATION_HM({{VAL(duration)}})}}</subtitle>
    			</lockup>
    			}}
    			}}
    		</section>
    	</shelf>
    	}}
    }}


}}
    {{PMS(plex.tv)}}{{
    <shelf id="Queue">
    		<section>
    {{XML(/pms/playlists/queue/unwatched)}}{{
    		{{IFNODE(MediaContainer/Video)}}{{
    		{{COPY(MediaContainer/Video)}}{{
    			<lockup
    				onSelect="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onSelectHold="modal">
    				<img class="roundedImageCorners" src="{{IMAGEHTTP(thumb)}}" height="300" width="400" />
    				<title><![CDATA[{{VAL(title)}}]]></title>
    			</lockup>
    			}}
    			}}
    }}
    {{XML(/pms/playlists/queue/watched)}}{{
    		{{IFNODE(MediaContainer/Video)}}{{
    		{{COPY(MediaContainer/Video)}}{{
    			<lockup
    				onSelect="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onSelectHold="modal">
    				<img class="roundedImageCorners" src="{{IMAGEHTTP(thumb)}}" height="200" width="300" />
    				<title><![CDATA[{{VAL(title)}}]]></title>
    			</lockup>
    			}}
    			}}
    }}
    			<header>
    				<title>Queue</title>
    			</header>
    		</section>
    	</shelf>
    }}

      </collectionList>
    </stackTemplate>
    </document>

    }}

    {{IF({{GET(noItems)}})}}{{  <!--enable if no items added-->
    <document>
      <alertTemplate>
        <title>PlexConnect</title>
        <description>{{TEXT(Plex Media Server: No Items Available)}}</description>
      </alertTemplate>
    </document>
    }}
