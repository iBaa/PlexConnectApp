<?xml version="1.0" encoding="UTF-8" ?>
{{CUT({{GET(noItems)}})}}{{
{{SET(noItems:true)}}
{{XML()}}{{
<document>
  <head>
    <style>
         .lightBackgroundColor {
         background-color: rgb(239, 236, 230);
         }
         .darkBackgroundColor {
         background-color: rgb(51, 51, 51);
         }
        .showTextOnHighlight {
        tv-text-highlight-style: show-on-highlight;
        }
        .shelfLabels {
        tv-text-highlight-style: show-on-highlight;
        }
        .whiteButton {
        tv-tint-color: rgb(255, 255, 255);
        font-size: 20;
        margin: 40;
        tv-text-style: callout;
        }
        .rowLayout {
        height: 100;
        margin: 60;
        tv-align: right;
        }
        .roundedImageCorners {
        itml-img-treatment: corner-small;
        }
        .roundedOverlay {
        itml-img-treatment: corner-small;
        margin: 0 -30 -280 -30;
        }
        .banner {
        margin: 0 0 30 0;
        }
        .shelfItems {
        tv-interitem-spacing: 60;
        }
        .sectionLabel {
        text-align: center;
        margin: 0 0 -15 0;
      <!--color: #605e58;-->
        }
        .title {
        color: #ffffff;
        }
        .count {
        font-weight: bold;
        font-size: 19;
        text-align: center;
        tv-position: bottom-right;
        margin: -307 -89 307 89;
        }
    </style>
  </head>
  <stackTemplate theme="light" class="lightBackgroundColor">
    <identityBanner class="banner">
      <title style="text-align: left;">Discover {{PMSVAL(name)}}</title>
      <subtitle style="text-align: left;">{{USRVAL(name)}}</subtitle>
      <row>
        <buttonLockup onSelect="Presenter.loadAndSwap('Library', '{{PMSID()}}', '{{PATH(/library/sections)}}')">
          <badge src="{{RESOURCEURL(TVMLTemplates/Revenant/images/buttons:Reload:png)}}" width="50" height="50"/>
          <title>Reload</title>
        </buttonLockup>
          <buttonLockup onSelect="Presenter.load('Search_All', '{{PMSID()}}', '')">
              <badge src="{{RESOURCEURL(TVMLTemplates/Revenant/images/buttons:Search:png)}}" width="50" height="50"/>
              <title>Search</title>
          </buttonLockup>
          <buttonLockup onSelect="Presenter.load('Settings', '', '')">
              <badge src="{{RESOURCEURL(TVMLTemplates/Revenant/images/buttons:Settings:png)}}" width="50" height="50"/>
              <title>Settings</title>
          </buttonLockup>
      </row>
    </identityBanner>
    <collectionList>
    <shelf autoHighlight="true">
      <header>
      	<title>Sections</title>
      </header>
      <section>
        {{COPY(MediaContainer/Directory)}}
        {{
        {{SET(noItems:false)}}
        {{IF({{CHK("{{VAL(type:)}}"=="movie")}})}}
        {{
        {{IF({{CHK("{{VAL(scanner:)}}"=="Plex Video Files Scanner")}})}}
        {{
        <lockup
          onSelect="Presenter.load('List', '{{PMSID()}}', '{{PATH(/library/sections/{{VAL(key)}}/folder)}}')"
          onSelectHold="modal">
{{XML({{PATH(/library/sections/{{VAL(key)}}/recentlyAdded)}})}}{{
            <img class="roundedImageCorners" src="{{IMAGEURL(MediaContainer/Video/art::600)}}" width="548" height="280" />
}}
        <overlay>
						<img class="roundedOverlay" src="{{RESOURCEURL(TVMLTemplates/Revenant/images:overlay:png)}}" width="548" height="280" />
          	<title class="sectionLabel"><![CDATA[{{VAL(title)}}]]></title>

        </overlay>
        </lockup>
        }}
        {{IF(!{{CHK("{{VAL(scanner:)}}"=="Plex Video Files Scanner")}})}}
        {{
        <lockup
          onSelect="Presenter.load('Movie_OnDeck', '{{PMSID()}}', '{{PATH(/library/sections/{{VAL(key)}})}}')"
          onSelectHold="modal">
{{XML({{PATH(/library/sections/{{VAL(key)}}/recentlyAdded)}})}}{{
            <img class="roundedImageCorners" src="{{IMAGEURL(MediaContainer/Video/art::600)}}" width="548" height="280" />
}}
        <overlay>
						<img class="roundedOverlay" src="{{RESOURCEURL(TVMLTemplates/Revenant/images:overlay:png)}}" width="548" height="280" />
						<title class="sectionLabel"><![CDATA[{{VAL(title)}}]]></title>

        </overlay>
        </lockup>
        }}
        }}
        {{IF({{CHK("{{VAL(type:)}}"=="show")}})}}
        {{
        <lockup
          onSelect="Presenter.load('TVShow_OnDeck', '{{PMSID()}}', '{{PATH(/library/sections/{{VAL(key)}})}}')"
          onSelectHold="modal">
{{XML({{PATH(/library/sections/{{VAL(key)}}/recentlyAdded)}})}}{{
					<img class="roundedImageCorners" src="{{IMAGEURL(MediaContainer/Video/art::600)}}" width="548" height="280" />
}}
        <overlay>
						<img class="roundedOverlay" src="{{RESOURCEURL(TVMLTemplates/Revenant/images:overlay:png)}}" width="548" height="280" />
						<title class="sectionLabel"><![CDATA[{{VAL(title)}}]]></title>

        </overlay>
        </lockup>
        }}
        {{IF({{CHK("{{VAL(type:)}}"=="artist")}})}}
        {{
        <lockup
          onSelect="Presenter.load('Music_OnDeck', '{{PMSID()}}', '{{PATH(/library/sections/{{VAL(key)}})}}')"
          onSelectHold="modal">
{{XML({{PATH(/library/sections/{{VAL(key)}}/recentlyAdded)}})}}{{
            <img class="roundedImageCorners" src="{{IMAGEURL(MediaContainer/Directory/art::600)}}" width="548" height="280" />
}}
        <overlay>
						<img class="roundedOverlay" src="{{RESOURCEURL(TVMLTemplates/Revenant/images:overlay:png)}}" width="548" height="280" />
						<title class="sectionLabel"><![CDATA[{{VAL(title)}}]]></title>

          </overlay>
        </lockup>
        }}
        {{IF({{CHK("{{VAL(type:)}}"=="photo")}})}}
        {{
        <lockup
          onSelect="Presenter.load('Photo_OnDeck', '{{PMSID()}}', '{{PATH(/library/sections/{{VAL(key)}})}}')"
          onSelectHold="modal">
{{XML({{PATH(/library/sections/{{VAL(key)}}/recentlyAdded)}})}}{{
            <img class="roundedImageCorners" src="{{IMAGEURL(MediaContainer/Photo/thumb::600)}}" width="548" height="280" />
}}
        <overlay>
						<img class="roundedOverlay" src="{{RESOURCEURL(TVMLTemplates/Revenant/images:overlay:png)}}" width="548" height="280" />
						<title class="sectionLabel"><![CDATA[{{VAL(title)}}]]></title>

          </overlay>
        </lockup>
        }}
        }}
      </section>
    </shelf>
{{XML({{PATH(/library/onDeck)}})}}{{
    {{IFNODE(MediaContainer/Video)}}{{
    <shelf id="onDeck">
      <header>
          <title>On Deck</title>
      </header>
      <section>
        {{COPY(MediaContainer/Video)}}{{

        {{SET(noItems:false)}}
        {{IF({{CHK("{{VAL(type:)}}"=="episode")}})}}{{
        <lockup
          onSelect="Presenter.load('TVShow_PrePlay', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onHoldSelect="Presenter.loadContext('Library_EpisodeContext', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')">
          <img src="{{IMAGEURL(grandparentThumb::360)}}" height="310" width="207" />
          <overlay>
         		<img style="tv-position: top-right; margin: -36 -30 120 120" src="{{RESOURCEURL(TVMLTemplates/Revenant/images/flags:watching:png)}}"  width="72" height="72" />
          </overlay>
          <title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle>{{TEXT(S)}}{{VAL(parentIndex)}} â€¢ {{TEXT(E)}}{{VAL(index)}}</subtitle>
        </lockup>
        }}
        {{IF({{CHK("{{VAL(type:)}}"=="movie")}})}}{{
        <lockup
          onSelect="Presenter.load('Movie_PrePlay', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}', 'resume')"
          onHoldSelect="Presenter.loadContext('Library_MovieContext', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')">
          <img src="{{IMAGEURL(thumb::360)}}" height="310" width="207" />
          <overlay>
         		<img style="tv-position: top-right; margin: -36 -30 120 120" src="{{RESOURCEURL(TVMLTemplates/Revenant/images/flags:watching:png)}}"  width="72" height="72" />
          </overlay>
 					<title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle>{{VAL(year)}}</subtitle>
        </lockup>
        }}
        }}
      </section>
    </shelf>
    }}
}}

{{XML({{PATH(/library/recentlyAdded)}})}}{{
	<shelf>
		<section>
    {{IFNODE(MediaContainer/Video)}}{{
      <header>
          <title>Recently Added Movies</title>
      </header>
        {{COPY(MediaContainer/Video)}}{{
        {{SET(noItems:false)}}
        {{IF({{VAL(viewOffset)}})}}{{
        <lockup onSelect="Presenter.load('Movie_PrePlay', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onPlay="Presenter.loadContext('Videos_ResumePopUp', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onHoldSelect="Presenter.loadContext('Movie_MovieContext', '{{PMSID()}}', '{{VAL(ratingKey)}}')">
          <img src="{{IMAGE_T(thumb::360)}}" height="375" width="250" />
          <overlay>
            <img style="tv-position: top-right; margin: -36 -30 120 120" src="{{RESOURCEURL(TVMLTemplates/Revenant/images/flags:watching:png)}}"  width="72" height="72" />
          </overlay>
          <title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle><![CDATA[{{VAL(year)}}]]></subtitle>
        </lockup>
        }}
        {{IF(!{{VAL(viewOffset)}})}}{{
        <lockup onSelect="Presenter.load('Movie_PrePlay', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onHoldSelect="Presenter.loadContext('Movie_MovieContext', '{{PMSID()}}', '{{VAL(ratingKey)}}')">
          <img src="{{IMAGE_T(thumb::360)}}" height="375" width="250" />
          {{IF(!{{VAL(viewCount)}})}}{{
          <overlay>
            <img style="tv-position: top-right; margin: -36 -30 120 120" src="{{RESOURCEURL(TVMLTemplates/Revenant/images/flags:unwatched:png)}}"  width="72" height="72" />
          </overlay>
          }}
          <title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle><![CDATA[{{VAL(year)}}]]></subtitle>
        </lockup>
        }}
        }}
    }}
  	</section>
	</shelf>
}}

{{XML({{PATH(/library/recentlyAdded)}})}}{{
	<shelf>
		<section>
    {{IFNODE(MediaContainer/Directory)}}{{
    {{COPY(MediaContainer/Directory)}}{{
        {{IF({{CHK("{{VAL(type:)}}"=="season")}})}}{{
        {{SET(noItems:false)}}
        <lockup onSelect="Presenter.load('TVShow_EpisodeGrid', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onHoldSelect="Presenter.loadContext('TVShow_ShowContext', '{{PMSID()}}', '{{VAL(ratingKey)}}')">
          <img src="{{IMAGE_T(thumb::360)}}" height="375" width="250" />
          {{IF(!{{CHK("{{VAL(leafCount)}}"="{{VAL(viewedLeafCount)}}")}})}}{{
          <overlay>
            <img style="tv-position: top-right; margin: -36 -30 120 120" src="{{RESOURCEURL(TVMLTemplates/Revenant/images/flags:unwatched:png)}}"  width="72" height="72" />
            <decorationLabel class="count">{{EVAL({{VAL(leafCount)}}-{{VAL(viewedLeafCount)}})}}</decorationLabel>
          </overlay>
          }}
          <title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle><![CDATA[{{VAL(parentTitle)}}]]></subtitle>
        </lockup>
        <header>
          <title>Recently Added Television</title>
      	</header>
        }}
        {{IF({{CHK("{{VAL(type:)}}"!="season")}})}}{{
        <data/>
        }}
    }}
    }}
    </section>
    </shelf>
    }}


    {{XML({{PATH(/hubs)}})}}{{
    	{{IFNODE(MediaContainer/Hub)}}{{
    	{{COPY(MediaContainer/Hub)}}{{
    		{{IF({{CHK("{{VAL(hubIdentifier:)}}"=="home.photos.recent")}})}}{{
    		<shelf>
    		<section>
    			{{COPY(Photo)}}{{
    			<lockup
    				onSelect="photoPresenter.show('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onPlay="photoPresenter.slideshow('{{PMSID()}}', '{{PATH()}}')"
    				onSelectHold="modal">
    				<img class="roundedImageCorners" src="{{IMAGEURL(thumb::360)}}" height="250" width="250" />
    				<title><![CDATA[{{VAL(originallyAvailableAt)}}]]></title>
    			</lockup>
    			}}
    		</section>
    		<header>
    				<title>Recently Added Photos</title>
    		</header>
    		</shelf>
    		}}
      }}
      }}
    }}

    {{XML({{PATH(/hubs)}})}}{{
    	{{IFNODE(MediaContainer/Hub)}}{{
    	{{COPY(MediaContainer/Hub)}}{{
    		{{IF({{CHK("{{VAL(hubIdentifier:)}}"=="home.music.recent")}})}}{{
    		<shelf>
    		<section>
    			{{COPY(Directory)}}{{
    			<lockup
    				onSelect="Presenter.load('Music_Album', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onPlay="audioPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}', 'shuffle')"
    				onSelectHold="modal">
    				<img src="{{IMAGEURL(thumb::360)}}" height="250" width="250" />
    				<title><![CDATA[{{VAL(title)}}]]></title>
    				<subtitle><![CDATA[{{VAL(parentTitle)}}]]></subtitle>
    			</lockup>
    			}}
    		</section>
    		<header>
    				<title>Recntly Added Music</title>
    		</header>
    		</shelf>
    		}}
    	}}
    	}}
    }}

    {{XML({{PATH(/channels/all)}})}}{{
    {{IFNODE(MediaContainer/Directory)}}{{
    	<shelf>
        <header>
            <title>Channels</title>
        </header>
    		<section>
            {{COPY(MediaContainer/Directory)}}{{
        {{SET(noItems:false)}}
        {{IF({{TABLE(${{VAL(key)}}:0:/video/:1)}})}}{{
        <lockup
          onSelect="Presenter.load('Channel_Video', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onSelectHold="modal">
          <img src="{{IMAGEURL(thumb::360)}}" height="250" width="250" />
          <title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle>Video</subtitle>
        </lockup>
        }}
        {{IF({{TABLE(${{VAL(key)}}:0:/music/:1)}})}}{{
        <lockup
          onSelect="Presenter.load('Channel_Music', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onSelectHold="modal">
          <img src="{{IMAGEURL(thumb::360)}}" height="250" width="250" />
          <title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle>Music</subtitle>
        </lockup>
        }}
        {{IF({{TABLE(${{VAL(key)}}:0:/photos/:1)}})}}{{
        <lockup
          onSelect="Presenter.load('Photo_Browser', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
          onSelectHold="modal">
          <img src="{{IMAGEURL(thumb::360)}}" height="250" width="250" />
          <title><![CDATA[{{VAL(title)}}]]></title>
          <subtitle>Photos</subtitle>
        </lockup>
        }}
        }}
      </section>
    </shelf>
    }}
  }}

    {{XML({{PATH(/playlists?sort=lastViewedAt)}})}}{{
    	 {{IFNODE(MediaContainer/Playlist)}}{{
    	 <shelf id="Playlists">
    		<header>
    				<title>Playlists</title>
    		</header>
    		<section>
    			{{COPY(MediaContainer/Playlist)}}{{
    			{{SET(noItems:false)}}
    			{{IF({{CHK("{{VAL(playlistType:)}}"=="video")}})}}{{
    			<lockup
    				onSelect="Presenter.load('Playlists_Video', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}', 'shuffle')"
    				onSelectHold="modal">
    				<img src="{{IMAGEURL(composite::360)}}" height="250" width="250" />
    				<title><![CDATA[{{VAL(title)}}]]></title>
    				<subtitle class="showTextOnHighlight">{{DURATION_HM({{VAL(duration)}})}}</subtitle>
    			</lockup>
    			}}
    			{{IF({{CHK("{{VAL(playlistType:)}}"=="audio")}})}}{{
    			<lockup
    				onSelect="Presenter.load('Playlists_Audio', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onPlay="audioPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}', 'shuffle')"
    				onSelectHold="modal">
    				<img src="{{IMAGEURL(composite::360)}}" height="250" width="250" />
    				<title><![CDATA[{{VAL(title)}}]]></title>
    				<subtitle>{{DURATION_HM({{VAL(duration)}})}}</subtitle>
    			</lockup>
    			}}
    			}}
    		</section>
    	</shelf>
    	}}
    }}


}}
    {{PMS(plex.tv)}}{{
    <shelf id="Queue">
    		<section>
    {{XML(/pms/playlists/queue/unwatched)}}{{
    		{{IFNODE(MediaContainer/Video)}}{{
    		{{COPY(MediaContainer/Video)}}{{
    			<lockup
    				onSelect="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onSelectHold="modal">
    				<img class="roundedImageCorners" src="{{IMAGEHTTP(thumb)}}" height="300" width="400" />
    				<title><![CDATA[{{VAL(title)}}]]></title>
            <subtitle>{{DURATION_HM({{VAL(duration)}})}}</subtitle>
    			</lockup>
    			}}
    			}}
    }}
    {{XML(/pms/playlists/queue/watched)}}{{
    		{{IFNODE(MediaContainer/Video)}}{{
    		{{COPY(MediaContainer/Video)}}{{
    			<lockup
    				onSelect="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
    				onSelectHold="modal">
    				<img class="roundedImageCorners" src="{{IMAGEHTTP(thumb)}}" height="200" width="300" />
    				<title><![CDATA[{{VAL(title)}}]]></title>
    			</lockup>
    			}}
    			}}
    }}
    			<header>
    				<title>Queue</title>
    			</header>
    		</section>
    	</shelf>
    }}

      </collectionList>
    </stackTemplate>
    </document>

    }}

    {{IF({{GET(noItems)}})}}{{  <!--enable if no items added-->
    <document>
      <alertTemplate>
        <title>PlexConnect</title>
        <description>{{TEXT(Plex Media Server: No Items Available)}}</description>
      </alertTemplate>
    </document>
    }}
