<?xml version="1.0" encoding="UTF-8" ?>
<!--
Copyright (C) 2015 Baa. All rights reserved.
See LICENSE.txt for this sampleâ€™s licensing information
-->
{{CUT({{GET(noItems)}})}}{{
{{SET(noItems:true)}}
<document>
    <head>
        <style>
            .lightBackgroundColor {
            background-color: #efece6;
            }
            .layout {
            margin: 40;
            }
            .showTextOnHighlight {
            tv-text-highlight-style: marquee-on-highlight;
            }
            .rounded {
            itml-img-treatment: corner-small;
            }
			.grid {
      		tv-interitem-spacing: 0;
      		}
      		.shelfItems {
      		tv-interitem-spacing: 60;
      		}
        </style>
    </head>
    <stackTemplate theme="light" class="lightBackgroundColor">
	{{XML()}}{{	
        <banner>
            <title><![CDATA[{{VAL(MediaContainer/title1)}}]]></title>
        </banner>
    }}    
    <collectionList>
	
	<shelf class="shelfItems" style="margin: -45 0 0 0" id="shelf_OnDeck">
    <section>
        <header>
            <title>{{TEXT(OnShelf)}}</title>
        </header>
        {{XML(onDeck)}}{{
		{{IFNODE(MediaContainer/Video)}}{{
		{{COPY(MediaContainer/Video)}}{{
        {{SET(noItems:false)}}  <!--within COPY this sets the var to false-->
        <lockup onSelect="Presenter.load('TVShow_PrePlay', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
            onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
            onSelectHold="ScrobbleMenu">
            <img src="{{IMAGEURL(grandparentThumb::360)}}" width="240" height="360" />
			{{IF({{VAL(viewOffset)}})}}{{
          <overlay>
                <progressBar value="{{EVAL({{VAL(viewOffset)}}.0/{{VAL(duration)}}.0)}}"/>
            </overlay>
			}}
            <title class="showTextOnHighlight">{{EP_INDEX({{VAL(parentIndex:)}}:{{VAL(index:)}})}}</title>
            <subtitle class="showTextOnHighlight"><![CDATA[{{VAL(title)}}]]></subtitle>
        </lockup>
        }}
        }}
        }}
		{{XML(unwatched)}}{{
		{{COPY(MediaContainer/Directory)}}{{
        {{SET(noItems:false)}}  <!--within COPY this sets the var to false-->
        <lockup onSelect="Presenter.load('TVShow_SeasonList', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
            onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
            onSelectHold="ScrobbleMenu">
            <img src="{{IMAGEURL(thumb::360)}}" width="240" height="360" />
	         <title class="showTextOnHighlight"><![CDATA[{{VAL(title)}}]]></title>
            <subtitle class="showTextOnHighlight">Unwatched {{EVAL({{VAL(leafCount)}}-{{VAL(viewedLeafCount)}})}}</subtitle>
        </lockup>
        }}
        }}
   	</section>
	</shelf>
		
{{XML(all)}}{{
<separator>
    <button style="height: 75; margin: -3 60 0 60" onSelect="Presenter.load('TVShow_Filters', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')">
        <text><![CDATA[{{VAL(MediaContainer/title2)}}    ]]><badge src="resource://button-dropdown" width="36" height="21" /></text>
    </button>
</separator>
	{{IFNODE(MediaContainer/Directory)}}{{
        <grid id="shelf_all">
          <section>
    {{COPY(MediaContainer/Directory)}}{{
	{{SET(noItems:false)}}  <!--within COPY this sets the var to false-->
            <lockup
                onSelect="Presenter.load('TVShow_SeasonList', '{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
                onPlay="videoPlayer.play('{{PMSID()}}', '{{PATH({{VAL(key)}})}}')"
                onSelectHold="ScrobbleMenu">
              <img src="{{IMAGEURL(thumb::360)}}" width="240" height="360" />
              <title class="showTextOnHighlight"><![CDATA[{{VAL(title)}}]]></title>
              <subtitle class="showTextOnHighlight"><![CDATA[{{VAL(leafCount)}} episodes]]></subtitle>
            </lockup>
	}}
          </section>
        </grid>
	}} 
}}

    </collectionList>

  </stackTemplate>
</document>
}}

{{IF({{GET(noItems)}})}}{{  <!--enable if no items added-->
<document>
  <alertTemplate>
    <title>TITLE</title>
    <description>{{TEXT(Plex Media Server: No Items Available)}}</description>
  </alertTemplate>
</document>
}}

